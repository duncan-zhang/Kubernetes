# Networking

## Service

### Service Types

#### ClusterIP
```sh
kubectl expose deployment web --port=80 --target-port=8080
```
```yaml
apiVersion: v1
kind: Service
metadata:
  name: web
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
  selector:
    app: web
```
* `用途`：預設類型，將服務暴露給叢集內部的其他`pod`。
* `外部訪問|:x:|`：只能通過叢集內部的`pod`或其他服務來訪問，外部無法訪問。

#### NodePort
```sh
kubectl expose deployment web --target-port=8080 --nodePort=30080 --type=NodePort
```
```yaml
apiVersion: v1
kind: Service
metadata:
  name: web
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
    nodePort: 30080
  selector:
    app: web
  type: NodePort
```
* `用途`：將服務暴露到每個節點特定端口上，可以通過集群節點的`IP:port`訪問服務。
* `nodePort`: 端口範圍是`30000~32767`，可略配置。

## Ingress
